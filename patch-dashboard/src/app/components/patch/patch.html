<div class="patch-container">
  <button (click)="toggleOptions()">Patches</button>

  <div *ngIf="showOptions">
    <button (click)="setView('display')">Display Patches</button>
    <button (click)="setView('add')">Add Patch</button>
    <button (click)="setView('delete')">Delete Patch</button>
  </div>

  <!-- Display Patch List -->
  <div *ngIf="currentView === 'display'">
    <h2>Patch List</h2>
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Patch Name</th>
          <th>Product</th>
          <th>Version</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let patch of patches">
          <td>{{patch.id}}</td>
          <td>{{ patch.patchName}}</td>
          <td>{{ patch.productName }}</td>
          <td>{{ patch.version }}</td>
          <td>{{ patch.description }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Add Patch Form -->
  <div *ngIf="currentView === 'add'">
    <h2>Add Patch</h2>
    <form (ngSubmit)="submitPatch()">
      <!-- ID is autogenerated, so hidden or readonly -->
      <!-- <label>ID: <input type="number" [value]="'(auto-generated)'" readonly></label> -->

      <label>
        Patch Name: 
        <input 
          [(ngModel)]="newPatch.patchName" 
          name="patchName" 
          placeholder="Example: Patch-4.2.0, Patch-3.1.0"
          
          required
        >
      </label>

      <label>Description: <input [(ngModel)]="newPatch.description" name="description"></label>

      <label>
        Status: 
        <select [(ngModel)]="newPatch.status" name="status" required>
          <option value="Released">Released</option>
          <option value="Scheduled">Scheduled</option>
        </select>
      </label>

      <label>Scheduled Time: <input type="datetime-local" [(ngModel)]="newPatch.scheduledTime" name="scheduledTime"></label>

      <!-- Target Type radio buttons -->
      <label>
      Target Type:
      <div class="radio-group">
       <label>
         <input type="radio" [(ngModel)]="newPatch.targetType" name="targetType" [value]="0"> Agent
       </label>
       <label>
           <input type="radio" [(ngModel)]="newPatch.targetType" name="targetType" [value]="1"> Product
       </label>
      </div>
      </label>


      <label>Product Name: <input [(ngModel)]="newPatch.productName" name="productName"  required></label>

      <label>Version: <input [(ngModel)]="newPatch.version" name="version"></label>

      <label>
        Base Url: 
        <input 
          [(ngModel)]="newPatch.downloadUrl" 
          name="downloadUrl" 
          readonly
        >
      </label>

      <!-- Zip upload -->
      <label>
        Upload Patch Zip (.zip):
        <input type="file" (change)="onFileSelected($event)" accept=".zip">
      </label>

      <button type="submit" style="color:aliceblue">Submit</button>
    </form>
  </div>

  <!-- Delete Patch -->
  <div *ngIf="currentView === 'delete'">
    <h2>Delete Patch</h2>
    <label>Product Name: <input [(ngModel)]="productname" name="productname"></label>
    <label>Patch Name: <input [(ngModel)]="patchname" name="patchname"></label>
    <button (click)="deletePatch()" style="background-color: rgb(204, 178, 241); color:black">Delete</button>
  </div>
</div>
